<!DOCTYPE html>
<html>
<head>
  <title>Session Vault</title>
  <style>
    body { font-family: sans-serif; padding: 16px; }
    .card { border: 1px solid #ccc; margin: 12px 0; padding: 12px; }
    .btn { padding: 6px 12px; background: #3b82f6; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <h2>ðŸ§  AI Memory Vault</h2>
  <div id="vault"></div>
  <script>
    const vaultDiv = document.getElementById("vault");

    const requestDB = indexedDB.open("HandoffVault", 1);
    requestDB.onsuccess = e => {
      const db = e.target.result;
      const tx = db.transaction("sessions", "readonly");
      const store = tx.objectStore("sessions");
      const req = store.getAll();

      req.onsuccess = () => {
        const sessions = req.result || [];
        sessions.forEach(s => {
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `
            <strong>${s.timestamp}</strong><br/>
            ${s.messages.length} messages<br/>
            <button class="btn">Export .SHARD</button>
          `;
          div.querySelector("button").onclick = () => {
            const blob = new Blob([JSON.stringify(s, null, 2)], {type: "application/json"});
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `MemoryCard_${Date.now()}.SHARD`;
            a.click();
            URL.revokeObjectURL(url);
          };
          vaultDiv.appendChild(div);
        });
      };
    };
  </script>
</body>
</html>
